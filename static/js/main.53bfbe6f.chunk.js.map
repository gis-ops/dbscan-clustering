{"version":3,"sources":["actions/actions.js","reducers/index.js","Map/utils.js","Map/hereTileLayers.js","Map/Map.jsx","Controls/Control.jsx","App.jsx","index.js"],"names":["fetchHerePlaces","payload","dispatch","getState","requestPlacesResults","category","boundingbox","placesControls","url","URL","params","app_id","app_code","in","size","cat","search","URLSearchParams","fetch","then","response","json","data","processPlacesResponse","color","catch","error","console","clear","type","doUpdateBoundingBox","bbox","_southWest","lng","lat","_northEast","join","updateBoundingBox","computeDbScan","results","items","length","parsePlacesResponse","receivePlacesResults","icon","description","title","places","initialPlacesState","message","receivedAt","lastCall","Date","now","dbscanSettings","minPoints","maxDistance","lastCompute","rootReducer","combineReducers","state","arguments","undefined","action","Object","objectSpread","defineProperty","isFetching","hasOwnProperty","concat","toConsumableArray","setting","value","prepareGeojson","geojson","clusterSize","clusterObj","L","geoJSON","pointToLayer","feature","latlng","properties","circleMarker","style","radius","fillColor","weight","opacity","pane","fillOpacity","bindTooltip","isNaN","parseInt","permanent","sticky","HereTileLayers","HERE","extend","options","subdomains","minZoom","maxZoom","scheme","resource","mapId","format","appId","appCode","initialize","schemeStart","this","split","tileResolution","retina","tileServer","indexOf","tileUrl","_attributionUrl","template","prototype","call","_attributionText","onAdd","map","_attributionBBoxes","_fetchAttributionBBoxes","onRemove","_map","attributionControl","removeAttribution","off","_findCopyrightBBox","xmlhttp","XMLHttpRequest","onreadystatechange","readyState","status","_parseAttributionBBoxes","JSON","parse","responseText","open","send","providers","normal","i","boxes","j","box","on","_attributionProviders","visibleProviders","zoom","getZoom","visibleBounds","getBounds","minLevel","maxLevel","push","overlaps","attributions","provider","alt","label","attributionText","addAttribution","here","opts","width","height","hereReducedDay","placesLayer","featureGroup","clusterLayer","mapParams","center","zoomControl","maxBounds","latLngBounds","latLng","layers","Map","_this","props","createPane","baseMaps","HERE Maps Tiles: reduced day","overlayMaps","Points of interest","Clusters","control","addTo","position","brand","div","DomUtil","create","innerHTML","hereLogo","addControl","clusterData","clustersNoiseEdges","clusters","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","features","Symbol","iterator","next","done","dbscan","geometry","coordinates","cluster","point","err","return","makeClusterObjects","multiPoint","featureCollection","polygon","concave","prevProps","_this$props","addPlaces","clearLayers","pointsGeojson","clustersDbscan","toGeoJSON","processClusters","cnt","place","placeObj","orig_color","id","react_default","a","createElement","React","Component","connect","_state$placesControls","segmentStyle","zIndex","top","left","maxHeight","overflow","padding","herePlaces","0","name","1","2","3","4","5","6","7","8","9","10","11","12","13","14","16","17","CustomSlider","_ref","min","max","step","start","build","discrete","settings","onChange","val","CustomLabel","_ref2","content","Popup","trigger","Label","Control","handleClick","event","handleClickDbscan","handleClickClear","componentDidUpdate","toast","topic","time","areButtonsDisabled","buttonsDisabled","key","_this2","CustomButton","_ref3","circular","popupContent","handler","disabled","basic","loading","Button","onClick","Segment","Header","as","href","rel","target","className","Control_CustomSlider","Control_CustomLabel","Divider","keys","index","isDisabled","react_semantic_toasts_build","App","src_Map_Map","Controls_Control","middleware","thunk","store","createStore","reducer","composeWithDevTools","applyMiddleware","apply","render","es","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.53bfbe6f.chunk.js","sourcesContent":["const hereAppCode = '0XXQyxbiCjVU7jN2URXuhg'\nconst hereAppId = 'yATlKFDZwdLtjHzyTeCK'\n\nexport const RECEIVE_PLACES_RESULTS = 'RECEIVE_PLACES_RESULTS'\nexport const REQUEST_PLACES_RESULTS = 'REQUEST_PLACES_RESULTS'\nexport const UPDATE_BBOX = 'UPDATE_BBOX'\nexport const UPDATE_DBSCAN_SETTINGS = 'UPDATE_DBSCAN_SETTINGS'\nexport const COMPUTE_DBSCAN = 'COMPUTE_DBSCAN'\nexport const RESULT_HANDLER = 'RESULT_HANDLER'\nexport const CLEAR = 'CLEAR'\n\nexport const fetchHerePlaces = payload => (dispatch, getState) => {\n  dispatch(requestPlacesResults({ category: payload.category }))\n\n  const { boundingbox } = getState().placesControls\n\n  const url = new URL(\n    'https://places.demo.api.here.com/places/v1/discover/explore'\n  )\n  const params = {\n    app_id: hereAppId,\n    app_code: hereAppCode,\n    //west longitude, south latitude, east longitude, north latitude.\n    in: boundingbox,\n    size: 500,\n    cat: payload.category\n  }\n\n  url.search = new URLSearchParams(params)\n\n  return fetch(url)\n    .then(response => response.json())\n    .then(data =>\n      dispatch(\n        processPlacesResponse(\n          data,\n          payload.category,\n          boundingbox,\n          payload.color\n        )\n      )\n    )\n    .catch(error => console.error(error)) //eslint-disable-line\n}\n\nexport const sendMessage = message => ({\n  type: RESULT_HANDLER,\n  payload: message\n})\n\nexport const clear = () => ({\n  type: CLEAR\n})\n\nexport const doUpdateBoundingBox = boundingbox => dispatch => {\n  const bbox = [\n    boundingbox._southWest.lng,\n    boundingbox._southWest.lat,\n    boundingbox._northEast.lng,\n    boundingbox._northEast.lat\n  ].join(',')\n\n  dispatch(updateBoundingBox(bbox))\n}\n\nconst updateBoundingBox = bbox => ({\n  type: UPDATE_BBOX,\n  payload: bbox\n})\n\nexport const computeDbScan = () => ({\n  type: COMPUTE_DBSCAN\n})\n\nexport const updateDbScanSettings = settings => ({\n  type: UPDATE_DBSCAN_SETTINGS,\n  payload: { ...settings }\n})\n\nconst parsePlacesResponse = json => {\n  if (json.results && json.results.items.length > 0) {\n    return json.results.items\n  }\n  return []\n}\n\nconst processPlacesResponse = (json, category, bbox, color) => dispatch => {\n  const results = parsePlacesResponse(json)\n\n  dispatch(\n    receivePlacesResults({\n      data: results,\n      category: category,\n      boundingbox: bbox,\n      color: color\n    })\n  )\n  if (results.length == 0) {\n    dispatch(\n      sendMessage({\n        type: 'info',\n        icon: 'warning',\n        description:\n          'No places in your viewport, zoom to another region and try again.',\n        title: 'DBScan settings'\n      })\n    )\n  }\n}\n\nexport const receivePlacesResults = places => ({\n  type: RECEIVE_PLACES_RESULTS,\n  payload: places\n})\n\nexport const requestPlacesResults = category => ({\n  type: REQUEST_PLACES_RESULTS,\n  payload: category\n})\n","import { combineReducers } from 'redux'\nimport {\n  REQUEST_PLACES_RESULTS,\n  RECEIVE_PLACES_RESULTS,\n  UPDATE_BBOX,\n  UPDATE_DBSCAN_SETTINGS,\n  COMPUTE_DBSCAN,\n  RESULT_HANDLER,\n  CLEAR\n} from '../actions/actions'\n\nconst initialPlacesState = {\n  boundingbox: '',\n  message: { receivedAt: 0 },\n  lastCall: Date.now(),\n  places: {},\n  dbscanSettings: {\n    minPoints: 10,\n    maxDistance: 500\n  },\n  lastCompute: 0\n}\n\nconst placesControls = (state = initialPlacesState, action) => {\n  switch (action.type) {\n    case CLEAR:\n      return {\n        ...state,\n        places: {},\n        lastCall: Date.now(),\n        lastCompute: Date.now()\n      }\n\n    case REQUEST_PLACES_RESULTS:\n      return {\n        ...state,\n        places: {\n          ...state.places,\n          [action.payload.category]: {\n            ...state.places[action.payload.category],\n            isFetching: true\n          }\n        }\n      }\n\n    case RECEIVE_PLACES_RESULTS:\n      return {\n        ...state,\n        lastCall: Date.now(),\n        places: {\n          ...state.places,\n          [action.payload.category]: {\n            ...state.places[action.payload.category],\n            data: state.places[action.payload.category].hasOwnProperty('data')\n              ? [\n                  ...state.places[action.payload.category].data,\n                  ...action.payload.data\n                ]\n              : action.payload.data,\n            boundingbox: action.payload.boundingbox,\n            color: action.payload.color,\n            isFetching: false\n          }\n        }\n      }\n\n    case UPDATE_BBOX:\n      return {\n        ...state,\n        boundingbox: action.payload\n      }\n\n    case RESULT_HANDLER:\n      return {\n        ...state,\n        message: {\n          ...state.message,\n          ...action.payload,\n          receivedAt: Date.now()\n        }\n      }\n\n    case COMPUTE_DBSCAN:\n      return {\n        ...state,\n        lastCompute: Date.now()\n      }\n\n    case UPDATE_DBSCAN_SETTINGS:\n      return {\n        ...state,\n        dbscanSettings: {\n          ...state.dbscanSettings,\n          [action.payload.setting]: action.payload.value\n        }\n      }\n\n    default:\n      return state\n  }\n}\n\nconst rootReducer = combineReducers({\n  placesControls\n})\n\nexport default rootReducer\n","import { clustersDbscan, point } from '@turf/turf'\nimport L from 'leaflet'\n\nexport const computeDbScan = (pointsGeojson, dbscanSettings) => {\n  const maxDistance = dbscanSettings.maxDistance / 1000\n  const minPoints = dbscanSettings.minPoints\n  const clustered = clustersDbscan(pointsGeojson, maxDistance, {\n    minPoints: minPoints\n  })\n\n  return clustered\n}\n\nexport const makeClusterObjects = data => {\n  const clusters = {}\n\n  for (const feature of data.features) {\n    if (\n      feature.properties.dbscan === 'noise' ||\n      feature.properties.dbscan === 'edge'\n    ) {\n      if (clusters.hasOwnProperty(feature.properties.dbscan)) {\n        clusters[feature.properties.dbscan].push(feature.geometry.coordinates)\n      } else {\n        clusters[feature.properties.dbscan] = []\n      }\n    } else if (feature.properties.dbscan === 'core') {\n      if (clusters.hasOwnProperty(feature.properties.cluster)) {\n        clusters[feature.properties.cluster].push(\n          point(feature.geometry.coordinates)\n        )\n      } else {\n        clusters[feature.properties.cluster] = []\n      }\n    }\n  }\n\n  return clusters\n}\n\nexport const prepareGeojson = (geojson, clusterSize, clusterObj) => {\n  return L.geoJSON(geojson, {\n    pointToLayer: (feature, latlng) => {\n      switch (feature.properties.type) {\n        case 'edge':\n        case 'noise':\n          return L.circleMarker(latlng)\n      }\n    },\n    style: feature => {\n      switch (feature.properties.type) {\n        case 'cluster':\n          return {\n            radius: 8,\n            fillColor: 'black',\n            weight: 0,\n            opacity: 1,\n            color: 'black',\n            pane: 'clusterPane'\n          }\n        case 'noise':\n          return {\n            radius: 8,\n            fillColor: 'black',\n            color: 'black',\n            weight: 0,\n            opacity: 1,\n            fillOpacity: 0.3\n          }\n        case 'edge':\n          return {\n            radius: 8,\n            fillColor: 'blue',\n            color: 'blue',\n            weight: 0,\n            opacity: 1,\n            fillOpacity: 0.3\n          }\n      }\n    }\n  }).bindTooltip(\n    '<strong>DBScan information:</strong> ' +\n      (!isNaN(clusterObj)\n        ? 'Cluster ' + (parseInt(clusterObj) + 1)\n        : clusterObj) +\n      (!isNaN(clusterObj)\n        ? '<br/> ' +\n          '<strong>Amount of points in cluster:</strong> ' +\n          clusterSize\n        : ''),\n    {\n      permanent: false,\n      sticky: true\n    }\n  )\n  //.openTooltip()\n}\n","import * as L from 'leaflet'\n\nconst HereTileLayers = {}\n\n// üçÇclass TileLayer.HERE\n// Tile layer for HERE maps tiles.\nHereTileLayers.HERE = L.TileLayer.extend({\n  options: {\n    subdomains: '1234',\n    minZoom: 2,\n    maxZoom: 18,\n\n    // üçÇoption scheme: String = 'normal.day'\n    // The \"map scheme\", as documented in the HERE API.\n    scheme: 'normal.day',\n\n    // üçÇoption resource: String = 'maptile'\n    // The \"map resource\", as documented in the HERE API.\n    resource: 'maptile',\n\n    // üçÇoption mapId: String = 'newest'\n    // Version of the map tiles to be used, or a hash of an unique map\n    mapId: 'newest',\n\n    // üçÇoption format: String = 'png8'\n    // Image format to be used (`png8`, `png`, or `jpg`)\n    format: 'png8',\n\n    // üçÇoption appId: String = ''\n    // Required option. The `app_id` provided as part of the HERE credentials\n    appId: '',\n\n    // üçÇoption appCode: String = ''\n    // Required option. The `app_code` provided as part of the HERE credentials\n    appCode: ''\n  },\n\n  initialize: function initialize(options) {\n    options = L.setOptions(this, options)\n\n    // Decide if this scheme uses the aerial servers or the basemap servers\n    const schemeStart = options.scheme.split('.')[0]\n    options.tileResolution = 256\n\n    if (L.Browser.retina) {\n      options.tileResolution = 512\n    }\n\n    //    {Base URL}{Path}/{resource (tile type)}/{map id}/{scheme}/{zoom}/{column}/{row}/{size}/{format}\n    //    ?app_id={YOUR_APP_ID}\n    //    &app_code={YOUR_APP_CODE}\n    //    &{param}={value}\n\n    const path =\n      '/{resource}/2.1/{resource}/{mapId}/{scheme}/{z}/{x}/{y}/{tileResolution}/{format}?app_id={appId}&app_code={appCode}'\n    const attributionPath =\n      '/maptile/2.1/copyright/{mapId}?app_id={appId}&app_code={appCode}'\n\n    let tileServer = 'base.maps.api.here.com'\n    if (\n      // eslint-disable-next-line\n      schemeStart == 'satellite' ||\n      // eslint-disable-next-line\n      schemeStart == 'terrain' ||\n      // eslint-disable-next-line\n      schemeStart == 'hybrid'\n    ) {\n      tileServer = 'aerial.maps.api.here.com'\n    }\n    if (options.scheme.indexOf('.traffic.') !== -1) {\n      tileServer = 'traffic.maps.api.here.com'\n    }\n\n    const tileUrl = 'https://{s}.' + tileServer + path\n\n    this._attributionUrl = L.Util.template(\n      'https://1.' + tileServer + attributionPath,\n      this.options\n    )\n\n    L.TileLayer.prototype.initialize.call(this, tileUrl, options)\n\n    this._attributionText = ''\n  },\n\n  onAdd: function onAdd(map) {\n    L.TileLayer.prototype.onAdd.call(this, map)\n\n    if (!this._attributionBBoxes) {\n      this._fetchAttributionBBoxes()\n    }\n  },\n\n  onRemove: function onRemove(map) {\n    L.TileLayer.prototype.onRemove.call(this, map)\n\n    this._map.attributionControl.removeAttribution(this._attributionText)\n\n    this._map.off('moveend zoomend resetview', this._findCopyrightBBox, this)\n  },\n\n  _fetchAttributionBBoxes: function _onMapMove() {\n    const xmlhttp = new XMLHttpRequest()\n    xmlhttp.onreadystatechange = L.bind(function() {\n      // eslint-disable-next-line\n      if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {\n        this._parseAttributionBBoxes(JSON.parse(xmlhttp.responseText))\n      }\n    }, this)\n    xmlhttp.open('GET', this._attributionUrl, true)\n    xmlhttp.send()\n  },\n\n  _parseAttributionBBoxes: function _parseAttributionBBoxes(json) {\n    if (!this._map) {\n      return\n    }\n    const providers = json[this.options.scheme.split('.')[0]] || json.normal\n    for (let i = 0; i < providers.length; i++) {\n      if (providers[i].boxes) {\n        for (let j = 0; j < providers[i].boxes.length; j++) {\n          const box = providers[i].boxes[j]\n          providers[i].boxes[j] = L.latLngBounds([\n            [box[0], box[1]],\n            [box[2], box[3]]\n          ])\n        }\n      }\n    }\n\n    this._map.on('moveend zoomend resetview', this._findCopyrightBBox, this)\n\n    this._attributionProviders = providers\n\n    this._findCopyrightBBox()\n  },\n\n  _findCopyrightBBox: function _findCopyrightBBox() {\n    if (!this._map) {\n      return\n    }\n    const providers = this._attributionProviders\n    const visibleProviders = []\n    const zoom = this._map.getZoom()\n    const visibleBounds = this._map.getBounds()\n\n    for (let i = 0; i < providers.length; i++) {\n      if (providers[i].minLevel < zoom && providers[i].maxLevel > zoom) {\n        if (!providers[i].boxes) {\n          // No boxes = attribution always visible\n          visibleProviders.push(providers[i])\n          break\n        }\n      }\n\n      for (let j = 0; j < providers[i].boxes.length; j++) {\n        const box = providers[i].boxes[j]\n        if (visibleBounds.overlaps(box)) {\n          visibleProviders.push(providers[i])\n          break\n        }\n      }\n    }\n\n    const attributions = [\n      '<a href=\"https://legal.here.com/terms/serviceterms/gb/\">HERE maps</a>'\n    ]\n    // eslint-disable-next-line\n    for (let i = 0; i < visibleProviders.length; i++) {\n      const provider = visibleProviders[i]\n      attributions.push(\n        '<abbr title=\"' + provider.alt + '\">' + provider.label + '</abbr>'\n      )\n    }\n\n    const attributionText = '¬© ' + attributions.join(', ') + '. '\n\n    if (attributionText !== this._attributionText) {\n      this._map.attributionControl.removeAttribution(this._attributionText)\n      this._map.attributionControl.addAttribution(\n        (this._attributionText = attributionText)\n      )\n    }\n  }\n})\n\nHereTileLayers.here = function(opts) {\n  return new HereTileLayers.HERE(opts)\n}\n\nexport default HereTileLayers\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport L from 'leaflet'\nimport PropTypes from 'prop-types'\nimport { concave, polygon, multiPoint, featureCollection } from '@turf/turf'\nimport { doUpdateBoundingBox } from '../actions/actions'\nimport { makeClusterObjects, computeDbScan, prepareGeojson } from './utils'\nimport HereTileLayers from './hereTileLayers'\n\n// defining the container styles the map sits in\nconst style = {\n  width: '100%',\n  height: '100vh'\n}\n\n// using the reduced.day map styles, have a look at the imported hereTileLayers for more\nconst hereReducedDay = HereTileLayers.here({\n  appId: 'jKco7gLGf0WWlvS5n2fl',\n  appCode: 'HQnCztY23zh2xiTPCFiTMA',\n  scheme: 'reduced.day'\n})\n\n// for this app we create two leaflet layer groups to control, one for the isochrone centers and one for the isochrone contours\nconst placesLayer = L.featureGroup()\nconst clusterLayer = L.featureGroup()\n\n// a leaflet map consumes parameters, I'd say they are quite self-explanatory\nconst mapParams = {\n  center: [40.7569, -73.9837],\n  zoomControl: false,\n  maxBounds: L.latLngBounds(L.latLng(-90, -180), L.latLng(90, 180)),\n  zoom: 13,\n  layers: [placesLayer, clusterLayer, hereReducedDay]\n}\n\n// this you have seen before, we define a react component\nclass Map extends React.Component {\n  static propTypes = {\n    lastCall: PropTypes.number,\n    lastCompute: PropTypes.number,\n    dbscanSettings: PropTypes.object,\n    dispatch: PropTypes.func.isRequired,\n    places: PropTypes.object\n  }\n\n  // and once the component has mounted we add everything to it\n  componentDidMount() {\n    // our map!\n    const { dispatch } = this.props\n\n    this.map = L.map('map', mapParams)\n\n    // we create a leaflet pane which will hold all isochrone polygons with a given opacity\n    const clusterPane = this.map.createPane('clusterPane')\n    clusterPane.style.opacity = 0.9\n\n    // our basemap and add it to the map\n    const baseMaps = {\n      'HERE Maps Tiles: reduced day': hereReducedDay\n    }\n\n    const overlayMaps = {\n      'Points of interest': placesLayer,\n      Clusters: clusterLayer\n    }\n\n    L.control.layers(baseMaps, overlayMaps).addTo(this.map)\n\n    // we do want a zoom control\n    L.control\n      .zoom({\n        position: 'topright'\n      })\n      .addTo(this.map)\n\n    //and for the sake of advertising your company, you may add a logo to the map\n    const brand = L.control({\n      position: 'bottomright'\n    })\n    brand.onAdd = function(map) {\n      const div = L.DomUtil.create('div', 'brand')\n      div.innerHTML =\n        '<a href=\"https://gis.ops.com\" target=\"_blank\"><div class=\"gis-ops-logo\"></a>'\n      return div\n    }\n    const hereLogo = L.control({\n      position: 'bottomright'\n    })\n    hereLogo.onAdd = function(map) {\n      const div = L.DomUtil.create('div', 'brand')\n      div.innerHTML =\n        '<a href=\"https://developer.here.com/\" target=\"_blank\"><div class=\"here-logo\"></div></a>'\n      return div\n    }\n    this.map.addControl(brand)\n    this.map.addControl(hereLogo)\n\n    this.map.on('moveend', () => {\n      dispatch(doUpdateBoundingBox(this.map.getBounds()))\n    })\n\n    dispatch(doUpdateBoundingBox(this.map.getBounds()))\n  }\n\n  processClusters(clusterData) {\n    const clustersNoiseEdges = makeClusterObjects(clusterData)\n\n    for (const clusterObj in clustersNoiseEdges) {\n      const clusterSize = clustersNoiseEdges[clusterObj].length\n      let geojson\n      if (clusterObj !== 'noise' && clusterObj !== 'edge') {\n        switch (true) {\n          case clusterSize <= 2: {\n            geojson = multiPoint(\n              featureCollection(clustersNoiseEdges[clusterObj]),\n              {\n                type: 'cluster'\n              }\n            )\n            break\n          }\n\n          case clusterSize == 3: {\n            geojson = polygon(\n              featureCollection(clustersNoiseEdges[clusterObj]),\n              {\n                type: 'cluster'\n              }\n            )\n            break\n          }\n\n          case clusterSize > 3: {\n            geojson = concave(featureCollection(clustersNoiseEdges[clusterObj]))\n            geojson.properties.type = 'cluster'\n\n            break\n          }\n        }\n      } else {\n        geojson = multiPoint(clustersNoiseEdges[clusterObj], {\n          type: clusterObj\n        })\n      }\n\n      prepareGeojson(geojson, clusterSize, clusterObj).addTo(clusterLayer)\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { lastCall, lastCompute, dbscanSettings } = this.props\n    if (lastCall > prevProps.lastCall) {\n      this.addPlaces()\n    }\n\n    if (lastCompute > prevProps.lastCompute) {\n      clusterLayer.clearLayers()\n      const clusters = computeDbScan(placesLayer.toGeoJSON(), dbscanSettings)\n      this.processClusters(clusters)\n    }\n  }\n\n  addPlaces() {\n    placesLayer.clearLayers()\n\n    const { places } = this.props\n    let cnt = 0\n    for (const place in places) {\n      if (\n        places[place].hasOwnProperty('data') &&\n        places[place].data.length > 0\n      ) {\n        for (const placeObj of places[place].data) {\n          L.circleMarker([placeObj.position[0], placeObj.position[1]], {\n            color: places[place].color,\n            orig_color: places[place].color,\n            radius: 5,\n            id: cnt,\n            weight: 1,\n            opacity: 0.5\n          })\n            .addTo(placesLayer)\n            .bindTooltip(placeObj.title)\n          cnt += 1\n        }\n      }\n    }\n  }\n\n  render() {\n    return <div id=\"map\" style={style} />\n  }\n}\n\nconst mapStateToProps = state => {\n  const { places, lastCall, lastCompute, dbscanSettings } = state.placesControls\n  return {\n    places,\n    lastCall,\n    lastCompute,\n    dbscanSettings\n  }\n}\n\nexport default connect(mapStateToProps)(Map)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Slider } from 'react-semantic-ui-range'\nimport { SemanticToastContainer, toast } from 'react-semantic-toasts'\n\nimport {\n  Segment,\n  Divider,\n  Button,\n  Header,\n  Label,\n  Popup\n} from 'semantic-ui-react'\n\nimport {\n  fetchHerePlaces,\n  updateDbScanSettings,\n  computeDbScan,\n  clear\n} from '../actions/actions'\n\nconst segmentStyle = {\n  zIndex: 999,\n  position: 'absolute',\n  width: '400px',\n  top: '10px',\n  left: '10px',\n  maxHeight: 'calc(100vh - 3vw)',\n  overflow: 'auto',\n  padding: '20px'\n}\n\nconst herePlaces = {\n  0: { name: 'shopping', color: 'red' },\n  1: { name: 'accommodation', color: 'orange' },\n  2: { name: 'administrative-areas-buildings', color: 'yellow' },\n  3: { name: 'airport', color: 'olive' },\n  4: { name: 'atm-bank-exchange', color: 'green' },\n  5: { name: 'coffee-tea', color: 'teal' },\n  6: { name: 'eat-drink', color: 'blue' },\n  7: { name: 'going-out', color: 'violet' },\n  8: { name: 'hospital-health-care-facility', color: 'purple' },\n  9: { name: 'leisure-outdoor', color: 'pink' },\n  10: { name: 'natural-geographical', color: 'brown' },\n  11: { name: 'petrol-station' },\n  12: { name: 'restaurant', color: 'grey' },\n  13: { name: 'snacks-fast-food', color: 'black' },\n  14: { name: 'sights-museums', color: 'red' },\n  16: { name: 'toilet-rest-area', color: 'yellow' },\n  17: { name: 'transport', color: 'olive' }\n}\n\nconst CustomSlider = ({ name, min, max, step, start, value, dispatch }) => (\n  <Slider\n    discrete\n    color=\"grey\"\n    settings={{\n      start: start,\n      value: value,\n      min: min,\n      max: max,\n      step: step,\n      onChange: val => {\n        dispatch(\n          updateDbScanSettings({\n            setting: name,\n            value: val\n          })\n        )\n      }\n    }}\n  />\n)\nCustomSlider.propTypes = {\n  name: PropTypes.string,\n  min: PropTypes.number,\n  max: PropTypes.number,\n  step: PropTypes.number,\n  start: PropTypes.number,\n  value: PropTypes.number,\n  dispatch: PropTypes.func\n}\n\nconst CustomLabel = ({ content, value }) => (\n  <Popup content={content} trigger={<Label size=\"tiny\">{value}</Label>} />\n)\nCustomLabel.propTypes = {\n  content: PropTypes.string,\n  value: PropTypes.string\n}\n\nclass Control extends React.Component {\n  static propTypes = {\n    places: PropTypes.object,\n    dbscanSettings: PropTypes.object,\n    boundingbox: PropTypes.string,\n    dispatch: PropTypes.func.isRequired,\n    message: PropTypes.object\n  }\n\n  handleClick = (event, data) => {\n    const { dispatch } = this.props\n    dispatch(fetchHerePlaces({ category: data.content, color: data.color }))\n  }\n\n  handleClickDbscan = () => {\n    const { dispatch } = this.props\n    dispatch(computeDbScan())\n  }\n\n  handleClickClear = () => {\n    const { dispatch } = this.props\n    dispatch(clear())\n  }\n  componentDidUpdate = prevProps => {\n    const { message } = this.props\n\n    if (message.receivedAt > prevProps.message.receivedAt) {\n      toast({\n        type: message.type,\n        icon: message.icon,\n        title: message.topic,\n        description: message.description,\n        time: 5000\n      })\n    }\n  }\n\n  areButtonsDisabled = places => {\n    let buttonsDisabled = true\n    for (const key in places) {\n      if (places.hasOwnProperty(key)) {\n        if (places[key].hasOwnProperty('data') && places[key].data.length > 0) {\n          buttonsDisabled = false\n        }\n      }\n    }\n\n    return buttonsDisabled\n  }\n\n  render() {\n    const { places, boundingbox, dbscanSettings, dispatch } = this.props\n    const CustomButton = ({\n      content,\n      circular,\n      popupContent,\n      handler,\n      icon,\n      value,\n      disabled,\n      basic,\n      size,\n      loading,\n      color\n    }) => (\n      <Popup\n        content={popupContent}\n        size={size}\n        trigger={\n          <Button\n            color={color}\n            circular={circular}\n            content={content}\n            loading={loading}\n            size={size}\n            onClick={handler}\n            basic={basic}\n            disabled={disabled}\n            icon={icon}\n          />\n        }\n      />\n    )\n\n    return (\n      <div>\n        <Segment style={segmentStyle}>\n          <div>\n            <span>\n              <Header as=\"h4\">DBScan with HERE Maps places and TurfJS</Header>\n              <p>\n                Density-based spatial clustering of applications with noise (\n                <a\n                  href=\"https://en.wikipedia.org/wiki/DBSCAN\"\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\">\n                  DBScan\n                </a>\n                ) is a data clustering algorithm. Given a set of points in some\n                space, it groups together points that are closely packed\n                together (points with many nearby neighbors), marking as\n                outliers points that lie alone in low-density regions (whose\n                nearest neighbors are too far away).\n              </p>\n              <p>\n                This application consumes{' '}\n                <a\n                  href=\"https://developer.here.com/api-explorer/rest/places\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\">\n                  HERE Maps places API\n                </a>{' '}\n                for given categories as point input for the clustering algorithm\n                which is implemented in\n                <a\n                  href=\"https://turfjs.org/docs/#clustersDbscan\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\">\n                  TurfJS\n                </a>\n                .\n              </p>\n            </span>\n          </div>\n          <Header as=\"h5\">DBScan settings</Header>\n          <div className=\"flex flex-row\">\n            <div className=\"w-80\">\n              <CustomSlider\n                name={'maxDistance'}\n                min={100}\n                max={5000}\n                step={50}\n                start={dbscanSettings.maxDistance}\n                value={dbscanSettings.maxDistance}\n                dispatch={dispatch}\n              />\n              <div className=\"mt2\">\n                <CustomLabel\n                  value={'Max. distance: ' + dbscanSettings.maxDistance}\n                  content={\n                    'Maximum Distance Œµ between any point of the cluster to generate the clusters'\n                  }\n                />\n              </div>\n            </div>\n            <div className=\"w-80\">\n              <CustomSlider\n                name={'minPoints'}\n                min={3}\n                max={50}\n                step={1}\n                start={dbscanSettings.minPoints}\n                value={dbscanSettings.minPoints}\n                dispatch={dispatch}\n              />\n\n              <div className=\"mt2\">\n                <CustomLabel\n                  value={'Min. points: ' + dbscanSettings.minPoints}\n                  content={\n                    \"Minimum number of points to generate a single cluster, points which do not meet this requirement will be classified as an 'edge' or 'noise'.\"\n                  }\n                />\n              </div>\n            </div>\n            <div className=\"w-20\">\n              <CustomButton\n                basic={true}\n                size={'tiny'}\n                icon={'whmcs'}\n                circular={true}\n                popupContent={'Compute DBScan'}\n                disabled={this.areButtonsDisabled(places)}\n                handler={this.handleClickDbscan}\n              />\n            </div>\n          </div>\n          <Divider />\n          <div>\n            {Object.keys(herePlaces).map((key, index) => {\n              let isDisabled = false\n              if (places.hasOwnProperty(herePlaces[key].name)) {\n                if (boundingbox === places[herePlaces[key].name].boundingbox) {\n                  isDisabled = true\n                }\n              }\n              return (\n                <div key={index} className=\"mt1 dib\">\n                  <CustomButton\n                    icon={false}\n                    popupContent={'Fetch places of this category'}\n                    content={herePlaces[key].name}\n                    handler={this.handleClick}\n                    color={herePlaces[key].color}\n                    disabled={isDisabled}\n                    loading={\n                      places[herePlaces[key].name]\n                        ? places[herePlaces[key].name].isFetching\n                        : false\n                    }\n                    size=\"tiny\"\n                  />\n                </div>\n              )\n            })}\n            <div className=\"mt2\">\n              <CustomButton\n                icon={'remove'}\n                size={'tiny'}\n                popupContent={'Reset places and map'}\n                handler={this.handleClickClear}\n                disabled={this.areButtonsDisabled(places)}\n              />\n            </div>\n          </div>\n        </Segment>\n        <SemanticToastContainer position=\"bottom-center\" />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  const { places, dbscanSettings, boundingbox, message } = state.placesControls\n  return {\n    places,\n    boundingbox,\n    dbscanSettings,\n    message\n  }\n}\n\nexport default connect(mapStateToProps)(Control)\n","import React from 'react'\nimport Map from './Map/Map'\nimport Controls from './Controls/Control'\n\nclass App extends React.Component {\n  render() {\n    return (\n      <div>\n        <Map />\n        <Controls />\n      </div>\n    )\n  }\n}\n\nexport default App\n","import React from 'react'\nimport { render } from 'react-dom'\n\nimport { createStore, applyMiddleware } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport { Provider } from 'react-redux'\nimport thunk from 'redux-thunk'\n\nimport reducer from './reducers'\nimport App from './App'\nimport './index.css' // postCSS import of CSS module\n\nconst middleware = [thunk]\n\nconst store = createStore(\n  reducer,\n  composeWithDevTools(applyMiddleware(...middleware))\n)\n\nrender(\n  <Provider store={store}>\n    {' '}\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}